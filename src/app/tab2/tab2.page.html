<ion-header [translucent]="true">
</ion-header>

<ion-content [scrollY]="false" [fullscreen]="true">
    <ion-header collapse="condense">
        <ion-toolbar>
            <ion-title size="large">Tab 2</ion-title>
        </ion-toolbar>
    </ion-header>

    <ion-grid [style.--ion-grid-columns]="9">

<!-- stats area -->
        <div class="ion-padding">
            <!-- day names row -->
            <ion-row>
                <ion-col size=2>
                    <ion-label color="danger" class="ion-text-wrap">
                        {{ dateInfo }}
                    </ion-label>
                </ion-col>
                <ion-col *ngFor="let dayName of weekArray[0].slice(2); let i = index" size=1>
                    <div *ngIf="i+1==this.ui['weekDay']; else elseBlock">
                        <ion-badge  color="warning">
                            {{ dayName }}
                        </ion-badge >
                    </div>
                    <ng-template #elseBlock>
                        <ion-badge >
                            {{ dayName }}
                        </ion-badge >
                    </ng-template>
                </ion-col>
            </ion-row>

            <!-- week view per day balance -->
            <!-- week view per day balance TODO: include per day budget-->
            <ion-row>
                <ion-col size=2>
                    <ion-badge [style.--background]="balanceColor">
                                Balance
                    </ion-badge>
                </ion-col>
                <ion-col *ngFor="let column of weekBalance[0]" size=1>
                    <div *ngIf="+column<0; else elseBlock">
                            <ion-badge color="danger"> {{ ((+column)*-1).toFixed(2) }} </ion-badge>
                    </div>
                    <ng-template #elseBlock>
                        <!-- <ng-container  *ngIf="+column>0 || i == 0"> -->
                        <ng-container  *ngIf="+column>0 || true">
                            <ion-badge> {{ column }} </ion-badge>
                        </ng-container>
                    </ng-template>
                </ion-col>
            </ion-row>

        <!-- buttons row -->
        <ion-row>
            <ion-col size=9>
                <!-- <ion-fab horizontal="start"> -->
                <ion-button fill="clear" (click)="this.stats.changeWeekViewOffset(false)" color="secondary">
                    <ion-icon name="chevron-back" size="small"></ion-icon>
                </ion-button>
                <!-- </ion-fab> -->
                <!-- <ion-fab horizontal="end"> -->
                <ion-button fill="clear" (click)="this.stats.changeWeekViewOffset()" position="end" color="secondary">
                    <ion-icon name="chevron-forward" size="small"></ion-icon>
                </ion-button>
                <!-- </ion-fab> -->
            </ion-col>
        </ion-row>


            <ion-row *ngFor="let row of weekArrayExpenses" >
                <ion-col size=2>
                    <ion-badge [style.--background]="row[0]">
                                {{ row[1] }}
                    </ion-badge>
                </ion-col>
                <ion-col *ngFor="let column of row.slice(2)" size=1>
                    <div *ngIf="+column<0; else elseBlock">
                            <ion-badge color="danger"> {{ ((+column)*-1).toFixed(2) }} </ion-badge>
                    </div>
                    <ng-template #elseBlock>
                        <ng-container  *ngIf="+column>0">
                            <ion-badge> {{ column }} </ion-badge>
                        </ng-container>
                    </ng-template>
                </ion-col>
            </ion-row>

            <ion-row *ngFor="let row of weekArrayIncome" >
                <ion-col size=2>
                    <ion-badge [style.--background]="row[0]">
                                {{ row[1] }}
                    </ion-badge>
                </ion-col>
                <ion-col *ngFor="let column of row.slice(2)" shape="round" lines="full" size=1>
                    <div *ngIf="+column<0; else elseBlock">
                            <ion-badge color="danger"> {{ ((+column)*-1).toFixed(2) }} </ion-badge>
                    </div>
                    <ng-template #elseBlock>
                        <ng-container *ngIf="+column>0">
                            <ion-badge> {{ column }} </ion-badge>
                        </ng-container>
                    </ng-template>
                </ion-col>
            </ion-row>
        </div>

    </ion-grid>

    <!-- transaction history section -->
    <!-- <ion-content [scrollY]="false" color="medium" class="ion-padding"> -->
        <cdk-virtual-scroll-viewport scrollWindow class="ion-content-scroll-host" itemSize="50">
            <ion-list>
                <ion-item-sliding *cdkVirtualFor="let item of transactionList; let i = index">
                    <ion-item>
                        <ion-label>{{ item["date"] }} {{item["category"]}} {{item["amount"] }}</ion-label>
                    </ion-item>
                    <ion-item-options side="end">
                        <ion-item-option color="primary" (click)="removeTransaction(i)">
                            <ion-icon name="trash" slot="icon-only"></ion-icon>
                        </ion-item-option>
                    </ion-item-options>
                </ion-item-sliding>
            </ion-list>
        </cdk-virtual-scroll-viewport>
    <!-- </ion-content> -->


    <ion-button (click)="printSum()">PrintSum</ion-button>

</ion-content>
