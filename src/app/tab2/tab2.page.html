<ion-header [translucent]="true">
</ion-header>

<ion-content [fullscreen]="true">
    <ion-header collapse="condense">
        <ion-toolbar>
            <ion-title size="large">Tab 2</ion-title>
        </ion-toolbar>
    </ion-header>

    <ion-grid [style.--ion-grid-columns]="9">

<!-- stats area -->
        <div class="ion-padding">
            <!-- day names row -->
            <ion-row>
                <ion-col size=2>
                    <ion-label color="danger" class="ion-text-wrap">
                        {{ dateInfo }}
                    </ion-label>
                </ion-col>
                <ion-col *ngFor="let dayName of weekArray[0].slice(2); let i = index" size=1>
                    <div *ngIf="i+1==this.ui['weekDay']; else elseBlock">
                        <ion-badge  color="warning">
                            {{ dayName }}
                        </ion-badge >
                    </div>
                    <ng-template #elseBlock>
                        <ion-badge >
                            {{ dayName }}
                        </ion-badge >
                    </ng-template>
                </ion-col>
            </ion-row>

            <!-- week view per day balance -->
            <!-- week view per day balance TODO: include per day budget-->
            <ion-row>
                <ion-col size=2>
                    <ion-badge [style.--background]="balanceColor">
                                Balance
                    </ion-badge>
                </ion-col>
                <ion-col *ngFor="let column of weekBalance[0]" size=1>
                    <div *ngIf="+column<0; else elseBlock">
                            <ion-badge color="danger"> {{ ((+column)*-1).toFixed(2) }} </ion-badge>
                    </div>
                    <ng-template #elseBlock>
                        <!-- <ng-container  *ngIf="+column>0 || i == 0"> -->
                        <ng-container  *ngIf="+column>0 || true">
                            <ion-badge> {{ column }} </ion-badge>
                        </ng-container>
                    </ng-template>
                </ion-col>
            </ion-row>

        <!-- buttons row -->
        <ion-row>
            <ion-col size=9>
                <!-- <ion-fab horizontal="start"> -->
                <ion-button fill="clear" (click)="this.stats.changeWeekViewOffset(false)" color="secondary">
                    <ion-icon name="chevron-back" size="small"></ion-icon>
                </ion-button>
                <!-- </ion-fab> -->
                <!-- <ion-fab horizontal="end"> -->
                <ion-button fill="clear" (click)="this.stats.changeWeekViewOffset()" position="end" color="secondary">
                    <ion-icon name="chevron-forward" size="small"></ion-icon>
                </ion-button>
                <!-- </ion-fab> -->
            </ion-col>
        </ion-row>


            <ion-row *ngFor="let row of weekArrayExpenses" >
                <ion-col size=2>
                    <ion-badge [style.--background]="row[0]">
                                {{ row[1] }}
                    </ion-badge>
                </ion-col>
                <ion-col *ngFor="let column of row.slice(2)" size=1>
                    <div *ngIf="+column<0; else elseBlock">
                            <ion-badge color="danger"> {{ ((+column)*-1).toFixed(2) }} </ion-badge>
                    </div>
                    <ng-template #elseBlock>
                        <ng-container  *ngIf="+column>0">
                            <ion-badge> {{ column }} </ion-badge>
                        </ng-container>
                    </ng-template>
                </ion-col>
            </ion-row>

            <ion-row *ngFor="let row of weekArrayIncome" >
                <ion-col size=2>
                    <ion-badge [style.--background]="row[0]">
                                {{ row[1] }}
                    </ion-badge>
                </ion-col>
                <ion-col *ngFor="let column of row.slice(2)" shape="round" lines="full" size=1>
                    <div *ngIf="+column<0; else elseBlock">
                            <ion-badge color="danger"> {{ ((+column)*-1).toFixed(2) }} </ion-badge>
                    </div>
                    <ng-template #elseBlock>
                        <ng-container *ngIf="+column>0">
                            <ion-badge> {{ column }} </ion-badge>
                        </ng-container>
                    </ng-template>
                </ion-col>
            </ion-row>
        </div>

    </ion-grid>

    <!-- transaction history section -->
    <!-- TODO: fix reverse here and change transaction observable maybe -->
    <ion-slides [options]="{ slidesPerView: '3.3', zoom: false, grabCursor: true }">
                <ion-slide *ngFor="let item of transactionList.slice().reverse(); let i = index">
                    <ion-card color="warning">
                        <ion-card-header>
                            <ion-card-title>{{ item["amount"] }}</ion-card-title>
                            <ion-card-subtitle>{{ item["date"] }} {{item["category"]}} </ion-card-subtitle>
                        </ion-card-header>

                        <ion-card-content>
                            {{ item["notes"]}}
                            <ion-item-options side="end">
                                <ion-item-option color="primary" (click)="removeTransaction(transactionList.length - i - 1)">
                                    <ion-icon name="trash" slot="icon-only"></ion-icon>
                                </ion-item-option>
                            </ion-item-options>
                        </ion-card-content>
                        <ion-button id="transactionClicked">
                            <ion-icon name="add" slot="icon-only"></ion-icon>
                        </ion-button>
                    </ion-card>
                </ion-slide>
    </ion-slides>
    <ion-modal trigger="transactionClicked" triggerAction="click">
        <ion-button>
            A Button
        </ion-button>
    </ion-modal>
</ion-content>
